# User Flow (사용자 흐름도) - Roomy

> Mermaid 플로우차트로 핵심 기능의 주요 여정을 표현합니다.
> 성공/실패 분기를 포함하고, 온보딩→핵심작업→리텐션 루프를 표현합니다.

---

## MVP 캡슐

| # | 항목 | 내용 |
|---|------|------|
| 1 | 목표 | 호스트의 시간을 벌어주고 숙소의 브랜드 가치를 높여주는 운영 솔루션 |
| 2 | 페르소나 | 감성 숙소/펜션/에어비앤비 호스트 (디자인과 고객 경험 중시, 반복 문의에 지친 상태) |
| 3 | 핵심 기능 | FEAT-1: 커스텀 에디터 (블록형 안내서 제작/수정) |
| 4 | 성공 지표 (노스스타) | 무료 → 유료 라이선스 전환율 |
| 5 | 입력 지표 | 신규 가입 호스트 수, 안내서 조회 수 |
| 6 | 비기능 요구 | 모바일에서도 PC와 동일한 수준의 에디터 경험 제공 |
| 7 | Out-of-scope | 예약 관리, 결제 시스템 자체 구현, 다크 모드 |
| 8 | Top 리스크 | 모바일 에디터 UX가 복잡해져 진입장벽이 높아질 위험 |
| 9 | 완화/실험 | 5명 이상의 실제 호스트와 프로토타입 테스트 |
| 10 | 다음 단계 | 커스텀 에디터 코어 개발 시작 |

---

## 1. 전체 사용자 여정 (Overview)

### 1.1 호스트 여정

```mermaid
graph TD
    A[Roomy 웹사이트 방문] --> B{로그인 상태?}
    B -->|No| C[FEAT-0: 로그인/회원가입]
    B -->|Yes| D[대시보드]
    C --> D

    D --> E{안내서 있음?}
    E -->|No| F[새 안내서 만들기]
    E -->|Yes| G[기존 안내서 선택]

    F --> H[FEAT-1: 커스텀 에디터]
    G --> H

    H --> I[FEAT-2: 블록 추가/수정]
    I --> J[FEAT-3: 테마/디자인 설정]
    J --> K[미리보기]

    K --> L{만족?}
    L -->|No| I
    L -->|Yes| M{유료 사용자?}

    M -->|No| N[워터마크 포함 미리보기]
    M -->|Yes| O[안내서 발행]

    N --> P[라이선스 구매 유도]
    P --> Q[스마트스토어 이동]
    Q --> R[라이선스 키 입력]
    R --> O

    O --> S[URL 복사/공유]
    S --> T[손님에게 발송]
    T --> U[리텐션: 통계 확인]
    U --> D
```

### 1.2 게스트 여정

```mermaid
graph TD
    A[카카오톡/문자로 링크 수신] --> B[링크 클릭]
    B --> C[안내서 페이지 로딩]
    C --> D[숙소 정보 확인]

    D --> E{정보 찾기}
    E -->|직접 탐색| F[블록별 정보 확인]
    E -->|AI 질문| G[FEAT-4: AI 컨시어지]

    F --> H[Wi-Fi 복사]
    F --> I[지도 열기]
    F --> J[맛집 추천 보기]

    G --> K[질문 입력]
    K --> L[AI 응답]
    L --> M{추가 질문?}
    M -->|Yes| K
    M -->|No| N[만족]

    H --> O[체크인 완료]
    I --> O
    J --> O
    N --> O

    O --> P[투숙 중 재방문]
    P --> D

    O --> Q[체크아웃 후]
    Q --> R[후기 작성 유도]
```

---

## 2. FEAT-0: 온보딩/로그인 플로우

```mermaid
graph TD
    A[시작 화면] --> B{신규/기존?}

    %% 신규 사용자
    B -->|신규| C[가입 방법 선택]
    C --> D[이메일 가입]
    C --> E[Google 로그인]
    C --> F[Kakao 로그인]

    D --> G[이메일 입력]
    G --> H[비밀번호 설정]
    H --> I[이메일 인증]
    I --> J[프로필 설정]

    E --> J
    F --> J

    J --> K[숙소 이름 입력]
    K --> L[온보딩 튜토리얼]
    L --> M[대시보드]

    %% 기존 사용자
    B -->|기존| N[로그인 방법 선택]
    N --> O[이메일 로그인]
    N --> P[소셜 로그인]

    O --> Q{인증 성공?}
    P --> Q

    Q -->|Yes| M
    Q -->|No| R[에러 표시]
    R --> N

    %% 비밀번호 찾기
    O --> S[비밀번호 찾기]
    S --> T[이메일로 재설정 링크]
    T --> U[새 비밀번호 설정]
    U --> O
```

---

## 3. FEAT-1: 커스텀 에디터 플로우

```mermaid
graph TD
    A[에디터 진입] --> B{PC/모바일?}

    %% PC 레이아웃
    B -->|PC| C[2-Column 레이아웃]
    C --> D[좌측: 미리보기]
    C --> E[우측: 컨트롤 패널]

    %% 모바일 레이아웃
    B -->|모바일| F[Full-Screen 미리보기]
    F --> G[블록 터치 → Bottom Sheet]
    F --> H[편집 버튼 → Drawer]

    %% 공통 편집 흐름
    D --> I[블록 선택]
    E --> I
    G --> I
    H --> I

    I --> J{편집 유형?}
    J -->|추가| K[블록 타입 선택]
    J -->|수정| L[블록 내용 편집]
    J -->|삭제| M[삭제 확인]
    J -->|순서변경| N[드래그앤드롭]

    K --> O[블록 추가됨]
    L --> P[변경 사항 저장]
    M --> Q[블록 삭제됨]
    N --> R[순서 변경됨]

    O --> S[실시간 미리보기 업데이트]
    P --> S
    Q --> S
    R --> S

    S --> T{저장?}
    T -->|자동저장| U[서버 동기화]
    T -->|수동저장| V[저장 버튼 클릭]

    U --> W[저장 완료 표시]
    V --> W
```

---

## 4. FEAT-2: 필수 정보 블록 플로우

```mermaid
graph TD
    A[블록 추가] --> B{블록 타입?}

    B -->|Stay Hero| C[메인 이미지 업로드]
    C --> D[숙소명/환영 문구 입력]

    B -->|Quick Info| E[체크인/아웃 시간 설정]
    E --> F[기준 인원 설정]
    F --> G[주차 가능 여부]

    B -->|Amenities| H[Wi-Fi 비밀번호 입력]
    H --> I[기기 사용법 추가]

    B -->|Map & Parking| J[주소 입력]
    J --> K[지도 미리보기]
    K --> L[주차장 사진/설명 추가]

    B -->|Host's Pick| M[맛집 추가]
    M --> N[사진/한줄평/지도링크]

    B -->|Notice| O[공지 내용 입력]
    O --> P[노출 방식 선택]
    P --> Q[팝업 or 배너]

    D --> R[블록 저장]
    G --> R
    I --> R
    L --> R
    N --> R
    Q --> R

    R --> S[미리보기 업데이트]
```

---

## 5. FEAT-3: 테마/디자인 플로우

```mermaid
graph TD
    A[테마 설정 진입] --> B[프리셋 테마 선택]

    B --> C[감성 테마]
    B --> D[모던 테마]
    B --> E[내추럴 테마]

    C --> F[테마 적용]
    D --> F
    E --> F

    F --> G{커스터마이징?}
    G -->|Yes| H[포인트 컬러 선택]
    G -->|No| M[완료]

    H --> I[폰트 선택]
    I --> J[블록 순서 변경]
    J --> K[실시간 미리보기]

    K --> L{만족?}
    L -->|Yes| M
    L -->|No| H

    M --> N[설정 저장]
```

---

## 6. FEAT-4: AI 컨시어지 플로우

```mermaid
graph TD
    A[AI 버튼 클릭] --> B{AI 활성화?}

    B -->|No| C[유료 안내만 표시]
    C --> D[유료 전환 유도]

    B -->|Yes| E[채팅 인터페이스 열기]
    E --> F[환영 메시지]
    F --> G[질문 입력]

    G --> H[RAG 검색]
    H --> I{관련 정보 있음?}

    I -->|Yes| J[안내서 기반 응답 생성]
    I -->|No| K[일반 응답 + 안내서 참조 유도]

    J --> L[응답 표시]
    K --> L

    L --> M[참조된 블록 하이라이트]
    M --> N{추가 질문?}

    N -->|Yes| G
    N -->|No| O[대화 종료]

    O --> P[만족도 피드백 요청]
```

---

## 7. 라이선스 구매 플로우

```mermaid
graph TD
    A[구매 버튼 클릭] --> B[네이버 스마트스토어 이동]
    B --> C[상품 선택]

    C --> D[1개월 이용권]
    C --> E[6개월 이용권]
    C --> F[12개월 이용권]

    D --> G[결제 진행]
    E --> G
    F --> G

    G --> H{결제 성공?}
    H -->|Yes| I[라이선스 키 자동 발급]
    H -->|No| J[결제 실패 안내]
    J --> G

    I --> K[키 이메일/문자 발송]
    K --> L[Roomy로 돌아가기]
    L --> M[라이선스 키 입력]

    M --> N{키 검증}
    N -->|성공| O[유료 기능 활성화]
    N -->|실패| P[재입력 안내]
    P --> M

    O --> Q[워터마크 제거]
    O --> R[AI 컨시어지 활성화]
    O --> S[안내서 발행 가능]
```

---

## 8. 에러 처리 플로우

```mermaid
graph TD
    A[에러 발생] --> B{에러 유형?}

    B -->|네트워크| C[연결 재시도 안내]
    B -->|입력 오류| D[필드별 에러 표시]
    B -->|권한 없음| E[로그인 유도]
    B -->|서버 오류| F[잠시 후 재시도 안내]
    B -->|라이선스| G[구매 또는 갱신 유도]

    C --> H{재시도?}
    H -->|Yes| I[재시도 실행]
    H -->|No| J[오프라인 저장 안내]

    D --> K[사용자 수정]
    K --> L[재제출]

    E --> M[로그인 화면]

    F --> N[자동 재시도 대기]
    N --> O{성공?}
    O -->|Yes| P[정상 진행]
    O -->|No| Q[고객센터 안내]

    G --> R[스마트스토어 이동]
```

---

## 9. 화면 목록 (Screen Inventory)

| 화면 ID | 화면명 | FEAT | 진입점 | 주요 액션 |
|---------|--------|------|--------|----------|
| S-01 | 랜딩 페이지 | - | URL 직접 접속 | 서비스 소개, 시작하기 |
| S-02 | 로그인 | FEAT-0 | S-01 | 이메일/소셜 로그인 |
| S-03 | 회원가입 | FEAT-0 | S-02 | 계정 생성 |
| S-04 | 대시보드 | - | 로그인 후 | 안내서 목록, 새로 만들기 |
| S-05 | 에디터 (PC) | FEAT-1 | S-04 | 블록 편집, 테마 설정 |
| S-06 | 에디터 (모바일) | FEAT-1 | S-04 | Bottom Sheet 편집 |
| S-07 | 블록 추가 모달 | FEAT-2 | S-05/S-06 | 블록 타입 선택 |
| S-08 | 테마 설정 패널 | FEAT-3 | S-05/S-06 | 프리셋/커스텀 설정 |
| S-09 | 미리보기 | FEAT-1 | S-05/S-06 | 최종 확인 |
| S-10 | 게스트 안내서 | - | /g/{slug} | 정보 확인, AI 질문 |
| S-11 | AI 채팅 | FEAT-4 | S-10 | 질문/답변 |
| S-12 | 라이선스 관리 | - | S-04 | 키 입력, 갱신 |
| S-13 | 설정 | - | S-04 | 프로필, 계정 관리 |

---

## Decision Log 참조

| ID | 항목 | 선택 | 근거 |
|----|------|------|------|
| UX-01 | 모바일 에디터 | Bottom Sheet + Drawer | PC 기능 100% 지원하면서 모바일 최적화 |
| UX-02 | 게스트 로그인 | 불필요 | 1박 투숙객에게 회원가입은 과한 요구 |
| UX-03 | 자동 저장 | 활성화 | 작업 유실 방지, 사용자 편의 |
| UX-04 | AI 진입점 | Floating Button | 언제든 접근 가능, 방해되지 않음 |
