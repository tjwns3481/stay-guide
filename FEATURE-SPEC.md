# Roomy ê¸°ëŠ¥ ì •ì˜ì„œ

> ìˆ™ë°•ì—…ì†Œìš© ëª¨ë°”ì¼ ì›¹ ì•ˆë‚´ì„œ & AI ì±—ë´‡ ì„œë¹„ìŠ¤

**ìµœì¢… ìˆ˜ì •ì¼**: 2025-01-16
**ë²„ì „**: 1.0.0

---

## ëª©ì°¨

1. [ì„œë¹„ìŠ¤ ê°œìš”](#1-ì„œë¹„ìŠ¤-ê°œìš”)
2. [ì‚¬ìš©ì ìœ í˜• ë° ê¶Œí•œ](#2-ì‚¬ìš©ì-ìœ í˜•-ë°-ê¶Œí•œ)
3. [í˜ì´ì§€ë³„ ê¸°ëŠ¥ ëª…ì„¸](#3-í˜ì´ì§€ë³„-ê¸°ëŠ¥-ëª…ì„¸)
4. [í•µì‹¬ ê¸°ëŠ¥ ìƒì„¸](#4-í•µì‹¬-ê¸°ëŠ¥-ìƒì„¸)
5. [ê¸°ìˆ  ìŠ¤íƒ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬](#5-ê¸°ìˆ -ìŠ¤íƒ-ë°-ë¼ì´ë¸ŒëŸ¬ë¦¬)
6. [API ëª…ì„¸](#6-api-ëª…ì„¸)
7. [ë°ì´í„° ëª¨ë¸](#7-ë°ì´í„°-ëª¨ë¸)

---

## 1. ì„œë¹„ìŠ¤ ê°œìš”

### 1.1 ì„œë¹„ìŠ¤ ëª©ì 

RoomyëŠ” ìˆ™ë°•ì—…ì†Œ í˜¸ìŠ¤íŠ¸ê°€ ê²ŒìŠ¤íŠ¸ë¥¼ ìœ„í•œ ë””ì§€í„¸ ì•ˆë‚´ì„œë¥¼ ì†ì‰½ê²Œ ì œì‘í•˜ê³ , ê²ŒìŠ¤íŠ¸ê°€ AI ì»¨ì‹œì–´ì§€ë¥¼ í†µí•´ ìˆ™ì†Œ ì •ë³´ë¥¼ ë¹ ë¥´ê²Œ ì–»ì„ ìˆ˜ ìˆëŠ” ì„œë¹„ìŠ¤ì…ë‹ˆë‹¤.

### 1.2 í•µì‹¬ ê°€ì¹˜

| ëŒ€ìƒ | ê°€ì¹˜ |
|------|------|
| **í˜¸ìŠ¤íŠ¸** | ë¸”ë¡í˜• ì—ë””í„°ë¡œ 5ë¶„ ë§Œì— ì•ˆë‚´ì„œ ì œì‘, ë°˜ë³µ ì§ˆë¬¸ ê°ì†Œ |
| **ê²ŒìŠ¤íŠ¸** | URL í•˜ë‚˜ë¡œ ìˆ™ì†Œ ì •ë³´ í™•ì¸, AI ì»¨ì‹œì–´ì§€ê°€ 24ì‹œê°„ ì‘ëŒ€ |

### 1.3 ì£¼ìš” íŠ¹ì§•

- **ë¸”ë¡í˜• ì—ë””í„°**: 6ê°€ì§€ ë¸”ë¡ íƒ€ì…ìœ¼ë¡œ ì§ê´€ì ì¸ ì•ˆë‚´ì„œ ì œì‘
- **ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°**: í¸ì§‘ ì¦‰ì‹œ ê²ŒìŠ¤íŠ¸ í™”ë©´ ë¯¸ë¦¬ë³´ê¸°
- **AI ì»¨ì‹œì–´ì§€**: RAG ê¸°ë°˜ ìì—°ì–´ ì§ˆì˜ì‘ë‹µ
- **ëª¨ë°”ì¼ ìš°ì„ **: ê²ŒìŠ¤íŠ¸ í™”ë©´ ëª¨ë°”ì¼ ìµœì í™”
- **ìë™ ì €ì¥**: 2ì´ˆ ë””ë°”ìš´ìŠ¤ë¡œ ë³€ê²½ì‚¬í•­ ìë™ ì €ì¥

---

## 2. ì‚¬ìš©ì ìœ í˜• ë° ê¶Œí•œ

### 2.1 í˜¸ìŠ¤íŠ¸ (Host)

ìˆ™ë°•ì—…ì†Œ ìš´ì˜ìë¡œ, ì•ˆë‚´ì„œë¥¼ ì œì‘í•˜ê³  ê´€ë¦¬í•©ë‹ˆë‹¤.

**í•„ìš” ì¡°ê±´**: ì†Œì…œ ë¡œê·¸ì¸ (Google ë˜ëŠ” Kakao)

**ê¶Œí•œ**:
- ì•ˆë‚´ì„œ ìƒì„±/ìˆ˜ì •/ì‚­ì œ
- ë¸”ë¡ ì¶”ê°€/í¸ì§‘/ìˆœì„œ ë³€ê²½
- í…Œë§ˆ ì»¤ìŠ¤í„°ë§ˆì´ì§•
- ì•ˆë‚´ì„œ ë°œí–‰/ë°œí–‰ ì·¨ì†Œ
- AI ì„¤ì • ê´€ë¦¬ (ì»¤ìŠ¤í…€ ì§€ì¹¨)
- ë¼ì´ì„ ìŠ¤ ê´€ë¦¬

### 2.2 ê²ŒìŠ¤íŠ¸ (Guest)

ìˆ™ì†Œ ì´ìš©ìë¡œ, í˜¸ìŠ¤íŠ¸ê°€ ê³µìœ í•œ URLë¡œ ì•ˆë‚´ì„œë¥¼ ì¡°íšŒí•©ë‹ˆë‹¤.

**í•„ìš” ì¡°ê±´**: ì—†ìŒ (ë¹„ë¡œê·¸ì¸)

**ê¶Œí•œ**:
- ë°œí–‰ëœ ì•ˆë‚´ì„œ ì¡°íšŒ
- AI ì»¨ì‹œì–´ì§€ ì´ìš©
- ì •ë³´ ë³µì‚¬ (ì£¼ì†Œ, Wi-Fi ë¹„ë°€ë²ˆí˜¸ ë“±)

---

## 3. í˜ì´ì§€ë³„ ê¸°ëŠ¥ ëª…ì„¸

### 3.1 ê³µê°œ í˜ì´ì§€

#### 3.1.1 ëœë”© í˜ì´ì§€ (`/`)

**íŒŒì¼**: `frontend/src/app/page.tsx`

| ì„¹ì…˜ | ìš”ì†Œ | ë™ì‘ |
|------|------|------|
| Hero | "ë¬´ë£Œë¡œ ì‹œì‘í•˜ê¸°" ë²„íŠ¼ | `/sign-up` í˜ì´ì§€ë¡œ ì´ë™ |
| Features | 6ê°€ì§€ ê¸°ëŠ¥ ì¹´ë“œ | ì •ë³´ í‘œì‹œ (í´ë¦­ ì—†ìŒ) |
| CTA | "ì§€ê¸ˆ ì‹œì‘í•˜ê¸°" ë²„íŠ¼ | `/sign-up` í˜ì´ì§€ë¡œ ì´ë™ |

**6ê°€ì§€ ê¸°ëŠ¥ ì†Œê°œ**:
1. ë¸”ë¡í˜• ì—ë””í„°
2. ëª¨ë°”ì¼ ìµœì í™”
3. AI ì»¨ì‹œì–´ì§€
4. ê°ì„± í…Œë§ˆ
5. ì›í´ë¦­ ë³µì‚¬
6. í†µê³„ ëŒ€ì‹œë³´ë“œ

---

#### 3.1.2 ë¡œê·¸ì¸ í˜ì´ì§€ (`/sign-in`)

**íŒŒì¼**: `frontend/src/app/(auth)/sign-in/[[...sign-in]]/page.tsx`

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| Google ë¡œê·¸ì¸ ë²„íŠ¼ | Google OAuth ì¸ì¦ â†’ `/dashboard` ì´ë™ |
| Kakao ë¡œê·¸ì¸ ë²„íŠ¼ | Kakao OAuth ì¸ì¦ â†’ `/dashboard` ì´ë™ |
| íšŒì›ê°€ì… ë§í¬ | `/sign-up` í˜ì´ì§€ë¡œ ì´ë™ |

**ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬**: `@clerk/nextjs` (SignIn ì»´í¬ë„ŒíŠ¸)

---

#### 3.1.3 íšŒì›ê°€ì… í˜ì´ì§€ (`/sign-up`)

**íŒŒì¼**: `frontend/src/app/(auth)/sign-up/[[...sign-up]]/page.tsx`

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| Google íšŒì›ê°€ì… ë²„íŠ¼ | Google OAuth ì¸ì¦ â†’ ì‚¬ìš©ì ìƒì„± â†’ `/dashboard` ì´ë™ |
| Kakao íšŒì›ê°€ì… ë²„íŠ¼ | Kakao OAuth ì¸ì¦ â†’ ì‚¬ìš©ì ìƒì„± â†’ `/dashboard` ì´ë™ |
| ë¡œê·¸ì¸ ë§í¬ | `/sign-in` í˜ì´ì§€ë¡œ ì´ë™ |

**ë°±ì—”ë“œ ì—°ë™**: Clerk Webhookì´ `user.created` ì´ë²¤íŠ¸ ìˆ˜ì‹  â†’ Prisma User ë ˆì½”ë“œ ìƒì„±

---

### 3.2 í˜¸ìŠ¤íŠ¸ ì „ìš© í˜ì´ì§€ (ì¸ì¦ í•„ìš”)

#### 3.2.1 ëŒ€ì‹œë³´ë“œ (`/dashboard`)

**íŒŒì¼**: `frontend/src/app/(protected)/dashboard/page.tsx`

**ë ˆì´ì•„ì›ƒ êµ¬ì„±**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í—¤ë” (ë¡œê³ , ì‚¬ìš©ì ë©”ë‰´)           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì‚¬ìš©ì ì •ë³´ ì¹´ë“œ                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ í”„ë¡œí•„ ì´ë¯¸ì§€ / ì´ë¦„ / ì´ë©”ì¼ â”‚  â”‚
â”‚  â”‚ í˜„ì¬ í”Œëœ / ë¼ì´ì„ ìŠ¤ ìƒíƒœ     â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [+ ìƒˆ ì•ˆë‚´ì„œ ë§Œë“¤ê¸°]               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ì•ˆë‚´ì„œ ëª©ë¡                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
â”‚  â”‚ ì•ˆë‚´ì„œ ì¹´ë“œ 1                 â”‚  â”‚
â”‚  â”‚ ì•ˆë‚´ì„œ ì¹´ë“œ 2                 â”‚  â”‚
â”‚  â”‚ ...                           â”‚  â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| ì‚¬ìš©ì ì •ë³´ ì¹´ë“œ | í”„ë¡œí•„, í”Œëœ ì •ë³´ í‘œì‹œ |
| "ìƒˆ ì•ˆë‚´ì„œ ë§Œë“¤ê¸°" ë²„íŠ¼ | `/editor/new` ì´ë™ â†’ APIë¡œ ì•ˆë‚´ì„œ ìƒì„± â†’ `/editor/{id}`ë¡œ ë¦¬ë‹¤ì´ë ‰íŠ¸ |
| ì•ˆë‚´ì„œ ì¹´ë“œ í´ë¦­ | `/editor/{id}` ì—ë””í„° í˜ì´ì§€ë¡œ ì´ë™ |
| ì•ˆë‚´ì„œ ì™¸ë¶€ ë§í¬ ë²„íŠ¼ | ìƒˆ íƒ­ì—ì„œ `/g/{slug}` ì—´ê¸° (ë°œí–‰ëœ ì•ˆë‚´ì„œë§Œ) |

**ì»´í¬ë„ŒíŠ¸**:
- `UserInfoCard`: ì‚¬ìš©ì ì •ë³´ í‘œì‹œ (`frontend/src/components/dashboard/UserInfoCard.tsx`)
- `GuidesList`: ì•ˆë‚´ì„œ ëª©ë¡ (`frontend/src/components/dashboard/GuidesList.tsx`)

**ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬**: Clerk `currentUser()`, Lucide Icons

---

#### 3.2.2 ì—ë””í„° í˜ì´ì§€ (`/editor/[id]`)

**íŒŒì¼**: `frontend/src/app/(protected)/editor/[id]/page.tsx`

**ë ˆì´ì•„ì›ƒ (PC - 2ì»¬ëŸ¼)**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì—ë””í„° í—¤ë”                                            â”‚
â”‚  [â†] ì œëª© ì…ë ¥          ì €ì¥ìƒíƒœ  [ë°œí–‰í•˜ê¸°] [â‹® ë”ë³´ê¸°] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                          â”‚                              â”‚
â”‚   ì‹¤ì‹œê°„ ë¯¸ë¦¬ë³´ê¸°        â”‚   í¸ì§‘ íŒ¨ë„                  â”‚
â”‚   (PreviewPanel)         â”‚   (ControlPanel)             â”‚
â”‚                          â”‚                              â”‚
â”‚   ê²ŒìŠ¤íŠ¸ê°€ ë³´ëŠ” í™”ë©´     â”‚   - ë¸”ë¡ ê´€ë¦¬               â”‚
â”‚   ê·¸ëŒ€ë¡œ í‘œì‹œ            â”‚   - ì„¤ì • (ì œëª©, slug)       â”‚
â”‚                          â”‚   - í…Œë§ˆ ì»¤ìŠ¤í„°ë§ˆì´ì§•       â”‚
â”‚                          â”‚                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë ˆì´ì•„ì›ƒ (ëª¨ë°”ì¼ - íƒ­ ì „í™˜)**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ì—ë””í„° í—¤ë”            â”‚
â”‚  [í¸ì§‘] [ë¯¸ë¦¬ë³´ê¸°] í† ê¸€ â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚   í˜„ì¬ ì„ íƒëœ ë·°        â”‚
â”‚   (í¸ì§‘ or ë¯¸ë¦¬ë³´ê¸°)    â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  ëª¨ë°”ì¼ Bottom Sheet    â”‚
â”‚  (ë¸”ë¡ ì¶”ê°€ ë“±)         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

##### ì—ë””í„° í—¤ë” (EditorHeader)

**íŒŒì¼**: `frontend/src/components/editor/EditorHeader.tsx`

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| â† ë’¤ë¡œê°€ê¸° ë²„íŠ¼ | `/dashboard`ë¡œ ì´ë™ (ë¯¸ì €ì¥ ì‹œ ê²½ê³ ) |
| ì œëª© ì…ë ¥ í•„ë“œ | ì•ˆë‚´ì„œ ì œëª© ì‹¤ì‹œê°„ ìˆ˜ì • |
| ì €ì¥ ìƒíƒœ í‘œì‹œ | "ì €ì¥ë¨" / "ì €ì¥ ì¤‘..." / "ì €ì¥ë˜ì§€ ì•ŠìŒ" |
| í¸ì§‘/ë¯¸ë¦¬ë³´ê¸° í† ê¸€ (ëª¨ë°”ì¼) | ë·° ëª¨ë“œ ì „í™˜ |
| "ë°œí–‰í•˜ê¸°" ë²„íŠ¼ | API í˜¸ì¶œ â†’ ë°œí–‰ ì™„ë£Œ â†’ URL í´ë¦½ë³´ë“œ ë³µì‚¬ |
| "ë°œí–‰ ì·¨ì†Œ" ë²„íŠ¼ (ë°œí–‰ ì‹œ) | ë°œí–‰ ì·¨ì†Œ API í˜¸ì¶œ |
| "ê³µìœ " ë²„íŠ¼ (ë°œí–‰ ì‹œ) | `/g/{slug}` URL í´ë¦½ë³´ë“œ ë³µì‚¬ |
| "ìƒˆ íƒ­ì—ì„œ ì—´ê¸°" (ë°œí–‰ ì‹œ) | `/g/{slug}` ìƒˆ íƒ­ ì—´ê¸° |
| "ì§€ê¸ˆ ì €ì¥" ë²„íŠ¼ | ìˆ˜ë™ ì €ì¥ íŠ¸ë¦¬ê±° |
| "ì•ˆë‚´ì„œ ì‚­ì œ" | ì‚­ì œ í™•ì¸ ëª¨ë‹¬ â†’ ì‚­ì œ API â†’ `/dashboard` ì´ë™ |

**ë‹¨ì¶•í‚¤**: `Ctrl+S` / `Cmd+S` â†’ ìˆ˜ë™ ì €ì¥

##### í¸ì§‘ íŒ¨ë„ (ControlPanel)

**íŒŒì¼**: `frontend/src/components/editor/ControlPanel.tsx`

**3ê°œ ì•„ì½”ë””ì–¸ ì„¹ì…˜**:

**1. ë¸”ë¡ ì„¹ì…˜**

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| "ë¸”ë¡ ì¶”ê°€" ë²„íŠ¼ | ë¸”ë¡ íƒ€ì… ì„ íƒ ë“œë¡­ë‹¤ìš´ í‘œì‹œ |
| ë¸”ë¡ íƒ€ì… ì„ íƒ | í•´ë‹¹ íƒ€ì… ë¸”ë¡ ì¶”ê°€ â†’ ë¸”ë¡ ëª©ë¡ ì—…ë°ì´íŠ¸ |
| BlockList | ë“œë˜ê·¸ì•¤ë“œë¡­ìœ¼ë¡œ ìˆœì„œ ë³€ê²½ ê°€ëŠ¥ |

**ë¸”ë¡ íƒ€ì… 6ê°€ì§€**:

| íƒ€ì… | ì•„ì´ì½˜ | ì„¤ëª… | ì£¼ìš” í•„ë“œ |
|------|--------|------|-----------|
| Hero | Image | ë©”ì¸ ì´ë¯¸ì§€ + í™˜ì˜ ë¬¸êµ¬ | imageUrl, title, subtitle, layout |
| Quick Info | Clock | ì²´í¬ì¸/ì•„ì›ƒ, ì¸ì›, ì£¼ì°¨ | checkIn, checkOut, maxGuests, parking, address |
| Amenities | Wifi | í¸ì˜ì‹œì„¤ ëª©ë¡ | wifiName, wifiPassword, items[] |
| Map | MapPin | ìœ„ì¹˜ ë° ì§€ë„ ë§í¬ | address, latitude, longitude, naverMapUrl, kakaoMapUrl |
| Host Pick | Heart | í˜¸ìŠ¤íŠ¸ ì¶”ì²œ | title, items[{name, category, description, url}] |
| Notice | AlertCircle | ê³µì§€ì‚¬í•­ | type(banner/popup), title, content |

**2. ì„¤ì • ì„¹ì…˜**

| í•„ë“œ | ì„¤ëª… | ê²€ì¦ ê·œì¹™ |
|------|------|-----------|
| ì•ˆë‚´ì„œ ì œëª© | ëŒ€ì‹œë³´ë“œì— í‘œì‹œë˜ëŠ” ì´ë¦„ | í•„ìˆ˜ |
| ìˆ™ì†Œëª… | ê²ŒìŠ¤íŠ¸ì—ê²Œ í‘œì‹œë˜ëŠ” ì´ë¦„ | í•„ìˆ˜ |
| URL ìŠ¬ëŸ¬ê·¸ | `/g/{slug}` í˜•íƒœë¡œ ì‚¬ìš© | ì˜ë¬¸ ì†Œë¬¸ì, ìˆ«ì, í•˜ì´í”ˆë§Œ / ì¤‘ë³µ ë¶ˆê°€ |

**3. í…Œë§ˆ ì„¹ì…˜**

**íŒŒì¼**: `frontend/src/components/editor/ThemeCustomizer.tsx`

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| ë¹ ë¥¸ í¬ì¸íŠ¸ ì»¬ëŸ¬ (6ê°œ) | í´ë¦­ ì‹œ ì¦‰ì‹œ í¬ì¸íŠ¸ ì»¬ëŸ¬ ë³€ê²½ |
| í…Œë§ˆ í”„ë¦¬ì…‹ | ë¯¸ë¦¬ ì •ì˜ëœ í…Œë§ˆ ì„¸íŠ¸ ì ìš© |
| ì»¤ìŠ¤í…€ ì„¤ì • (ì ‘ì´ì‹) | ìƒì„¸ ì»¤ìŠ¤í„°ë§ˆì´ì§• |

**ì»¤ìŠ¤í…€ ì„¤ì • í•­ëª©**:
- í¬ì¸íŠ¸ ì»¬ëŸ¬ (Primary)
- ë³´ì¡° ì»¬ëŸ¬ (Secondary)
- ë°°ê²½ìƒ‰
- í°íŠ¸ ì„ íƒ

##### ë¸”ë¡ ëª©ë¡ (BlockList)

**íŒŒì¼**: `frontend/src/components/editor/BlockList.tsx`

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| ë“œë˜ê·¸ í•¸ë“¤ (â‹®â‹®) | ë“œë˜ê·¸í•˜ì—¬ ë¸”ë¡ ìˆœì„œ ë³€ê²½ |
| ë¸”ë¡ ì œëª© í´ë¦­ | ì¸ë¼ì¸ í¸ì§‘ê¸° í¼ì¹¨/ì ‘í˜ (ì•„ì½”ë””ì–¸) |
| í† ê¸€ ìŠ¤ìœ„ì¹˜ | ë¸”ë¡ í‘œì‹œ/ìˆ¨ê¹€ ì „í™˜ |
| ë³µì œ ë²„íŠ¼ | ë¸”ë¡ ë³µì œ (ë°”ë¡œ ì•„ë˜ì— ì¶”ê°€) |
| ì‚­ì œ ë²„íŠ¼ | ë¸”ë¡ ì‚­ì œ (í™•ì¸ ì—†ì´ ì¦‰ì‹œ) |

**ì‚¬ìš© ë¼ì´ë¸ŒëŸ¬ë¦¬**: `@dnd-kit/core`, `@dnd-kit/sortable`

##### ë¸”ë¡ í¸ì§‘ê¸° (BlockEditor)

**íŒŒì¼**: `frontend/src/components/blocks/BlockEditor.tsx`

**ëª¨ë“œ**:
- **ì¸ë¼ì¸ ëª¨ë“œ**: ë¸”ë¡ ëª©ë¡ ë‚´ ì•„ì½”ë””ì–¸ìœ¼ë¡œ í¼ì³ì§
- **ì „ì²´ í™”ë©´ ëª¨ë“œ**: ë³„ë„ íŒ¨ë„ë¡œ í‘œì‹œ (ëª¨ë°”ì¼)

**ë¸”ë¡ë³„ ì—ë””í„°**:

| ë¸”ë¡ | ì—ë””í„° íŒŒì¼ | ì£¼ìš” ì…ë ¥ |
|------|-------------|-----------|
| Hero | `HeroEditor.tsx` | ì´ë¯¸ì§€ ì—…ë¡œë“œ/URL, ì œëª©, ë¶€ì œëª©, ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼ |
| Quick Info | `QuickInfoEditor.tsx` | ì²´í¬ì¸/ì•„ì›ƒ ì‹œê°„, ìµœëŒ€ ì¸ì›, ì£¼ì°¨ ì •ë³´, ì£¼ì†Œ |
| Amenities | `AmenitiesEditor.tsx` | Wi-Fi SSID/ë¹„ë°€ë²ˆí˜¸, í¸ì˜ì‹œì„¤ ì²´í¬ë¦¬ìŠ¤íŠ¸ |
| Map | `MapEditor.tsx` | ì£¼ì†Œ, ìœ„ë„/ê²½ë„, ë„¤ì´ë²„ë§µ/ì¹´ì¹´ì˜¤ë§µ URL |
| Host Pick | `HostPickEditor.tsx` | ì„¹ì…˜ ì œëª©, ì¶”ì²œ ì•„ì´í…œ ëª©ë¡ (ë™ì  ì¶”ê°€) |
| Notice | `NoticeEditor.tsx` | íƒ€ì…(ë°°ë„ˆ/íŒì—…), ì œëª©, ë‚´ìš© |

##### ë¯¸ë¦¬ë³´ê¸° íŒ¨ë„ (PreviewPanel)

**íŒŒì¼**: `frontend/src/components/editor/PreviewPanel.tsx`

- ê²ŒìŠ¤íŠ¸ ë·°(`GuideRenderer`)ì™€ ë™ì¼í•œ ë Œë”ë§
- í¸ì§‘ ë‚´ìš© ì‹¤ì‹œê°„ ë°˜ì˜
- ëª¨ë°”ì¼ í”„ë ˆì„ ì‹œë®¬ë ˆì´ì…˜ (ì„ íƒì )

---

#### 3.2.3 ì„¤ì • í˜ì´ì§€ (`/settings`)

**íŒŒì¼**: `frontend/src/app/(protected)/settings/page.tsx`

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| ë¼ì´ì„ ìŠ¤ ê´€ë¦¬ ë§í¬ | `/settings/license` ì´ë™ |
| í”„ë¡œí•„ ì„¤ì • | ì´ë¦„ ë³€ê²½ ë“± |

---

#### 3.2.4 ë¼ì´ì„ ìŠ¤ í˜ì´ì§€ (`/settings/license`)

**íŒŒì¼**: `frontend/src/app/(protected)/settings/license/page.tsx`

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| í˜„ì¬ í”Œëœ í‘œì‹œ | í™œì„± ë¼ì´ì„ ìŠ¤ ì •ë³´ |
| ë¼ì´ì„ ìŠ¤ í‚¤ ì…ë ¥ | í˜•ì‹: `ROOMY-XXXX-XXXX-XXXX` |
| "í™œì„±í™”" ë²„íŠ¼ | API í˜¸ì¶œ â†’ ë¼ì´ì„ ìŠ¤ ì ìš© |
| í”Œëœ ë¹„êµí‘œ | ë¬´ë£Œ/ì›”ê°„/ë°˜ê¸°/ì—°ê°„ ê¸°ëŠ¥ ë¹„êµ |

**ì»´í¬ë„ŒíŠ¸**:
- `LicenseForm`: ë¼ì´ì„ ìŠ¤ í‚¤ ì…ë ¥ í¼
- `PlanCard`: ê°œë³„ í”Œëœ ì¹´ë“œ
- `PlanComparison`: í”Œëœ ë¹„êµí‘œ

---

### 3.3 ê²ŒìŠ¤íŠ¸ ì „ìš© í˜ì´ì§€ (ë¹„ë¡œê·¸ì¸)

#### 3.3.1 ì•ˆë‚´ì„œ ë·° (`/g/[slug]`)

**íŒŒì¼**: `frontend/src/app/(guest)/g/[slug]/page.tsx`

**ë Œë”ë§ ë°©ì‹**: Server-Side Rendering (SSR)

**ë ˆì´ì•„ì›ƒ**:

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  í—¤ë” (ìˆ™ì†Œëª…)          â”‚  â† Sticky
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚   ë¸”ë¡ 1 (Hero)         â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ë¸”ë¡ 2 (Quick Info)   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ë¸”ë¡ 3 (Amenities)    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚   ...                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  í‘¸í„° (Powered by Roomy)â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
         [ğŸ’¬]              â† AI í”Œë¡œíŒ… ë²„íŠ¼
```

**ê¸°ëŠ¥**:

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| ë¸”ë¡ ì½˜í…ì¸  | í˜¸ìŠ¤íŠ¸ê°€ ì‘ì„±í•œ ì •ë³´ í‘œì‹œ |
| ì£¼ì†Œ ë³µì‚¬ ë²„íŠ¼ | í´ë¦½ë³´ë“œì— ì£¼ì†Œ ë³µì‚¬ |
| Wi-Fi ë¹„ë°€ë²ˆí˜¸ ë³µì‚¬ | í´ë¦½ë³´ë“œì— ë¹„ë°€ë²ˆí˜¸ ë³µì‚¬ |
| ë„¤ì´ë²„ë§µ ë²„íŠ¼ | ë„¤ì´ë²„ ì§€ë„ ì•±/ì›¹ ì—´ê¸° |
| ì¹´ì¹´ì˜¤ë§µ ë²„íŠ¼ | ì¹´ì¹´ì˜¤ë§µ ì•±/ì›¹ ì—´ê¸° |
| AI í”Œë¡œíŒ… ë²„íŠ¼ | ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ ì—´ê¸° |

**SEO ìµœì í™”**:
- ë™ì  ë©”íƒ€ë°ì´í„° ìƒì„±
- Open Graph íƒœê·¸ (ì œëª©, ì„¤ëª…, ì´ë¯¸ì§€)

**ì ‘ê·¼ ì œì–´**:
- `isPublished === false`ì¸ ê²½ìš° 404 í˜ì´ì§€ í‘œì‹œ

##### ë¸”ë¡ ë Œë”ëŸ¬ (BlockRenderer)

**íŒŒì¼**: `frontend/src/components/guest/BlockRenderer.tsx`

| ë¸”ë¡ | ë·° ì»´í¬ë„ŒíŠ¸ | í‘œì‹œ ë‚´ìš© |
|------|-------------|-----------|
| Hero | `HeroBlock.tsx` | ë°°ê²½ ì´ë¯¸ì§€ + ì˜¤ë²„ë ˆì´ í…ìŠ¤íŠ¸ |
| Quick Info | `QuickInfoBlock.tsx` | ì²´í¬ì¸/ì•„ì›ƒ ì‹œê°„, ì¸ì›, ì£¼ì°¨, ì£¼ì†Œ(ë³µì‚¬) |
| Amenities | `AmenitiesBlock.tsx` | Wi-Fi ì •ë³´(ë³µì‚¬), í¸ì˜ì‹œì„¤ ì•„ì´ì½˜ |
| Map | `MapBlock.tsx` | ì§€ë„ ì´ë¯¸ì§€, ë„¤ì´ë²„/ì¹´ì¹´ì˜¤ë§µ ë²„íŠ¼ |
| Host Pick | `HostPickBlock.tsx` | ì¶”ì²œ ì•„ì´í…œ ì¹´ë“œ ê·¸ë¦¬ë“œ |
| Notice | `NoticeBlock.tsx` | ë°°ë„ˆ ë˜ëŠ” íŒì—… í˜•íƒœ ê³µì§€ |

---

### 3.4 AI ì±—ë´‡ ì¸í„°í˜ì´ìŠ¤

#### 3.4.1 í”Œë¡œíŒ… ë²„íŠ¼ (AiFloatingButton)

**íŒŒì¼**: `frontend/src/components/ai/AiFloatingButton.tsx`

- **ìœ„ì¹˜**: ìš°í•˜ë‹¨ ê³ ì • (position: fixed)
- **ì•„ì´ì½˜**: ë©”ì‹œì§€ ë²„ë¸” (Lucide MessageCircle)
- **ë™ì‘**: í´ë¦­ ì‹œ ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ ì—´ê¸°

#### 3.4.2 ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ (ChatInterface)

**íŒŒì¼**: `frontend/src/components/ai/ChatInterface.tsx`

**ë ˆì´ì•„ì›ƒ (ëª¨ë°”ì¼)**:
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AI ì»¨ì‹œì–´ì§€    [ì´ˆê¸°í™”] â”‚  â† í—¤ë”
â”‚ ìˆ™ì†Œëª…              [X] â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                         â”‚
â”‚   [AI] ì•ˆë…•í•˜ì„¸ìš”!      â”‚
â”‚        ë¬´ì—‡ì„ ë„ì™€...   â”‚
â”‚                         â”‚
â”‚            [User] ì²´í¬ì¸â”‚
â”‚            ì‹œê°„ì´...    â”‚
â”‚                         â”‚
â”‚   [AI] ì²´í¬ì¸ì€ ì˜¤í›„... â”‚
â”‚        ...              â”‚
â”‚                         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  [ë©”ì‹œì§€ ì…ë ¥...]   [â†’] â”‚  â† ì…ë ¥ ì˜ì—­
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ë ˆì´ì•„ì›ƒ (PC)**:
- ìš°í•˜ë‹¨ ê³ ì • íŒ¨ë„ (384px Ã— 600px)
- í”Œë¡œíŒ… ë²„íŠ¼ ìœ„ì— í‘œì‹œ

**ê¸°ëŠ¥**:

| ìš”ì†Œ | ë™ì‘ |
|------|------|
| ë©”ì‹œì§€ ì…ë ¥ | Enter â†’ ì „ì†¡, Shift+Enter â†’ ì¤„ë°”ê¿ˆ |
| ì „ì†¡ ë²„íŠ¼ | ë©”ì‹œì§€ ì „ì†¡ â†’ AI ì‘ë‹µ ìŠ¤íŠ¸ë¦¬ë° |
| ì¤‘ë‹¨ ë²„íŠ¼ (ì‘ë‹µ ì¤‘) | ìŠ¤íŠ¸ë¦¬ë° ì¤‘ë‹¨ (AbortController) |
| ì´ˆê¸°í™” ë²„íŠ¼ | ëŒ€í™” ê¸°ë¡ ì‚­ì œ, ìƒˆ ì„¸ì…˜ ì‹œì‘ |
| ë‹«ê¸° ë²„íŠ¼ (X) | ì±„íŒ… ì¸í„°í˜ì´ìŠ¤ ë‹«ê¸° |

**ë©”ì‹œì§€ íƒ€ì…**:
- **ì‚¬ìš©ì ë©”ì‹œì§€**: ìš°ì¸¡ ì •ë ¬, íŒŒë€ìƒ‰ ë°°ê²½
- **AI ë©”ì‹œì§€**: ì¢Œì¸¡ ì •ë ¬, íšŒìƒ‰ ë°°ê²½, ìŠ¤íŠ¸ë¦¬ë° íƒ€ì´í•‘ íš¨ê³¼

**ì‚¬ìš© í›…**: `useAiChat` (`frontend/src/hooks/useAiChat.ts`)

---

## 4. í•µì‹¬ ê¸°ëŠ¥ ìƒì„¸

### 4.1 ë¸”ë¡ ì—ë””í„° ì‹œìŠ¤í…œ

#### 4.1.1 ë¸”ë¡ ë°ì´í„° êµ¬ì¡°

```typescript
interface Block {
  id: string;           // nanoid ìƒì„±
  guideId: string;      // ì†Œì† ì•ˆë‚´ì„œ
  type: BlockType;      // 'hero' | 'quick_info' | 'amenities' | 'map' | 'host_pick' | 'notice'
  order: number;        // í‘œì‹œ ìˆœì„œ (0ë¶€í„° ì‹œì‘)
  content: JSON;        // íƒ€ì…ë³„ ìƒì´í•œ êµ¬ì¡°
  isVisible: boolean;   // í‘œì‹œ ì—¬ë¶€
  createdAt: DateTime;
  updatedAt: DateTime;
}
```

#### 4.1.2 ë¸”ë¡ë³„ Content ìŠ¤í‚¤ë§ˆ

**Hero ë¸”ë¡**:
```typescript
{
  imageUrl?: string;     // ì´ë¯¸ì§€ URL
  title?: string;        // ë©”ì¸ ì œëª©
  subtitle?: string;     // ë¶€ì œëª©
  layout?: 'full' | 'half';  // ë ˆì´ì•„ì›ƒ ìŠ¤íƒ€ì¼
}
```

**Quick Info ë¸”ë¡**:
```typescript
{
  checkIn?: string;      // ì²´í¬ì¸ ì‹œê°„ (ì˜ˆ: "15:00")
  checkOut?: string;     // ì²´í¬ì•„ì›ƒ ì‹œê°„ (ì˜ˆ: "11:00")
  maxGuests?: number;    // ìµœëŒ€ ì¸ì›
  parking?: string;      // ì£¼ì°¨ ì •ë³´ (ì˜ˆ: "ë¬´ë£Œ ì£¼ì°¨ ê°€ëŠ¥")
  address?: string;      // ìˆ™ì†Œ ì£¼ì†Œ
}
```

**Amenities ë¸”ë¡**:
```typescript
{
  wifiName?: string;     // Wi-Fi SSID
  wifiPassword?: string; // Wi-Fi ë¹„ë°€ë²ˆí˜¸
  items?: string[];      // í¸ì˜ì‹œì„¤ ëª©ë¡ (ì˜ˆ: ["ì—ì–´ì»¨", "ëƒ‰ì¥ê³ ", "ì „ìë ˆì¸ì§€"])
}
```

**Map ë¸”ë¡**:
```typescript
{
  address?: string;      // ì£¼ì†Œ
  latitude?: number;     // ìœ„ë„
  longitude?: number;    // ê²½ë„
  naverMapUrl?: string;  // ë„¤ì´ë²„ ì§€ë„ URL
  kakaoMapUrl?: string;  // ì¹´ì¹´ì˜¤ë§µ URL
  directions?: string;   // ì°¾ì•„ì˜¤ì‹œëŠ” ê¸¸ ì•ˆë‚´
}
```

**Host Pick ë¸”ë¡**:
```typescript
{
  title?: string;        // ì„¹ì…˜ ì œëª© (ì˜ˆ: "ë§›ì§‘ ì¶”ì²œ")
  items?: {
    name: string;        // ì¥ì†Œëª…
    category?: string;   // ì¹´í…Œê³ ë¦¬ (ì˜ˆ: "ì¹´í˜", "ë§›ì§‘")
    description?: string;// ì„¤ëª…
    url?: string;        // ì™¸ë¶€ ë§í¬
  }[];
}
```

**Notice ë¸”ë¡**:
```typescript
{
  type?: 'banner' | 'popup';  // í‘œì‹œ í˜•íƒœ
  title?: string;             // ê³µì§€ ì œëª©
  content?: string;           // ê³µì§€ ë‚´ìš©
}
```

#### 4.1.3 ë“œë˜ê·¸ì•¤ë“œë¡­

**ë¼ì´ë¸ŒëŸ¬ë¦¬**: `@dnd-kit`

**êµ¬í˜„**:
- `DndContext`: ë“œë˜ê·¸ ì»¨í…ìŠ¤íŠ¸ ì œê³µ
- `SortableContext`: ì •ë ¬ ê°€ëŠ¥ ì˜ì—­ ì •ì˜
- `useSortable`: ê°œë³„ ì•„ì´í…œ ë“œë˜ê·¸ ê¸°ëŠ¥

**ìˆœì„œ ë³€ê²½ ë¡œì§**:
1. ë“œë˜ê·¸ ì‹œì‘ â†’ ì‹œê°ì  í”¼ë“œë°± (ê·¸ë¦¼ì, ë°˜íˆ¬ëª…)
2. ë“œë˜ê·¸ ì¤‘ â†’ ë‹¤ë¥¸ ì•„ì´í…œ ìœ„ë¡œ ì´ë™ ì‹œ ìœ„ì¹˜ ë¯¸ë¦¬ë³´ê¸°
3. ë“œë¡­ â†’ `reorderBlocks()` ì•¡ì…˜ â†’ order ê°’ ì¬ê³„ì‚°

---

### 4.2 ìë™ ì €ì¥ ì‹œìŠ¤í…œ

**íŒŒì¼**: `frontend/src/hooks/useAutoSave.ts`

#### 4.2.1 ë™ì‘ ë°©ì‹

```
ì‚¬ìš©ì í¸ì§‘ â†’ saveStatus = 'unsaved' â†’ 2ì´ˆ ëŒ€ê¸° (ë””ë°”ìš´ìŠ¤)
                                            â†“
                                      ì¶”ê°€ í¸ì§‘ ë°œìƒ?
                                      â”œâ”€ Yes â†’ íƒ€ì´ë¨¸ ë¦¬ì…‹
                                      â””â”€ No â†’ ì €ì¥ ì‹¤í–‰
```

#### 4.2.2 ì €ì¥ ìƒíƒœ

| ìƒíƒœ | í‘œì‹œ | ì„¤ëª… |
|------|------|------|
| `saved` | "ì €ì¥ë¨" | ëª¨ë“  ë³€ê²½ì‚¬í•­ ì €ì¥ ì™„ë£Œ |
| `saving` | "ì €ì¥ ì¤‘..." | API í˜¸ì¶œ ì§„í–‰ ì¤‘ |
| `unsaved` | "ì €ì¥ë˜ì§€ ì•ŠìŒ" | ë¯¸ì €ì¥ ë³€ê²½ì‚¬í•­ ì¡´ì¬ |
| `error` | "ì €ì¥ ì‹¤íŒ¨" | API í˜¸ì¶œ ì‹¤íŒ¨ |

#### 4.2.3 ë³€ê²½ ê°ì§€

- `JSON.stringify(currentGuide)` vs `JSON.stringify(originalGuide)` ë¹„êµ
- ì¤‘ë³µ ì €ì¥ ë°©ì§€: ì§ì „ ì €ì¥ ë‚´ìš©ê³¼ ë™ì¼ ì‹œ ìŠ¤í‚µ

#### 4.2.4 í˜ì´ì§€ ì´íƒˆ ë°©ì§€

- `beforeunload` ì´ë²¤íŠ¸ë¡œ ë¯¸ì €ì¥ ì‹œ ê²½ê³ 
- `router.push` í˜¸ì¶œ ì „ ë¯¸ì €ì¥ í™•ì¸

---

### 4.3 AI ì»¨ì‹œì–´ì§€ ì‹œìŠ¤í…œ

#### 4.3.1 Long Context ì•„í‚¤í…ì²˜

Gemini 2.0 Flashì˜ Long Context Window(1M tokens)ë¥¼ í™œìš©í•˜ì—¬, ìˆ™ì†Œì˜ ëª¨ë“  ë¸”ë¡ ë°ì´í„°ë¥¼ í”„ë¡¬í”„íŠ¸ì— ì§ì ‘ ì£¼ì…í•˜ëŠ” ë°©ì‹ì…ë‹ˆë‹¤.

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì§ˆì˜ ì²˜ë¦¬ (ê²ŒìŠ¤íŠ¸ ì§ˆë¬¸ ì‹œ)             â”‚
â”‚                                                          â”‚
â”‚  1. Prismaë¡œ Guide + ëª¨ë“  Block ì¡°íšŒ (ë‹¨ìˆœ DB ì¡°íšŒ)      â”‚
â”‚            â†“                                             â”‚
â”‚  2. ë¸”ë¡ ë°ì´í„°ë¥¼ ë§ˆí¬ë‹¤ìš´ í…ìŠ¤íŠ¸ë¡œ ë³€í™˜                 â”‚
â”‚            â†“                                             â”‚
â”‚  3. ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ì— ìˆ™ì†Œ ì „ì²´ ì •ë³´ ì£¼ì…                â”‚
â”‚            â†“                                             â”‚
â”‚  4. ì´ì „ ëŒ€í™” ê¸°ë¡ ì¡°íšŒ (ìµœê·¼ 10ê°œ)                      â”‚
â”‚            â†“                                             â”‚
â”‚  5. Gemini 2.0 Flashë¡œ ì‘ë‹µ ìƒì„±                        â”‚
â”‚            â†“                                             â”‚
â”‚  6. SSE ìŠ¤íŠ¸ë¦¬ë°ìœ¼ë¡œ ì‹¤ì‹œê°„ ì „ì†¡                        â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**ì¥ì **:
- ì„ë² ë”© ìƒì„± ë¹„ìš© ì—†ìŒ (API í˜¸ì¶œ ì ˆê°)
- pgvector ì˜ì¡´ì„± ë¶ˆí•„ìš”
- ì½”ë“œ ë³µì¡ë„ ê°ì†Œ
- ëª¨ë“  ìˆ™ì†Œ ì •ë³´ì— ëŒ€í•´ ì •í™•í•œ ë‹µë³€ ê°€ëŠ¥

#### 4.3.2 LLM ì‘ë‹µ ìƒì„±

**ì œê³µì**: Google Generative AI
**ëª¨ë¸**: `gemini-2.0-flash`
**SDK**: `@google/generative-ai` (ì§ì ‘ ì‚¬ìš©)

**íŒŒì¼**: `frontend/src/app/api/[[...route]]/services/ai-free/llm.ts`

**ì‹œìŠ¤í…œ í”„ë¡¬í”„íŠ¸ êµ¬ì„±**:
```
ë‹¹ì‹ ì€ "{ìˆ™ì†Œëª…}" ìˆ™ì†Œì˜ AI ì»¨ì‹œì–´ì§€ì…ë‹ˆë‹¤.

## ì—­í• 
ê²ŒìŠ¤íŠ¸ì˜ ì§ˆë¬¸ì— ì¹œì ˆí•˜ê³  ì •í™•í•˜ê²Œ ë‹µë³€í•˜ëŠ” ê²ƒì´ ë‹¹ì‹ ì˜ ì—­í• ì…ë‹ˆë‹¤.

## ìˆ™ì†Œ ì •ë³´
{ë¸”ë¡ ë°ì´í„°ë¥¼ ë§ˆí¬ë‹¤ìš´ìœ¼ë¡œ ë³€í™˜í•œ ì „ì²´ ìˆ™ì†Œ ì •ë³´}

## ë‹µë³€ ì›ì¹™
1. ìœ„ì˜ ìˆ™ì†Œ ì •ë³´ì— ìˆëŠ” ë‚´ìš©ë§Œ ë‹µë³€í•˜ì„¸ìš”.
2. ì •ë³´ê°€ ì—†ëŠ” ê²½ìš° í˜¸ìŠ¤íŠ¸ì—ê²Œ ë¬¸ì˜í•˜ë¼ê³  ì•ˆë‚´í•˜ì„¸ìš”.
3. ê°„ê²°í•˜ê³  ëª…í™•í•˜ê²Œ ë‹µë³€í•˜ì„¸ìš”.

## í˜¸ìŠ¤íŠ¸ ì¶”ê°€ ì§€ì¹¨ (ì„ íƒì )
{aiInstructions}
```

#### 4.3.3 ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ (SSE)

**í”„ë¡œí† ì½œ**: Server-Sent Events

**ì´ë²¤íŠ¸ íƒ€ì…**:
```
event: message
data: {"chunk": "ì•ˆë…•í•˜ì„¸ìš”"}

event: message
data: {"chunk": "! ë¬´ì—‡ì„"}

event: done
data: {"sessionId": "abc123", "messageId": "xyz789"}

event: error
data: {"message": "ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤"}
```

**í´ë¼ì´ì–¸íŠ¸ ì²˜ë¦¬** (`useAiChat.ts`):
- `ReadableStream` íŒŒì‹±
- ì²­í¬ ë‹¨ìœ„ë¡œ ë©”ì‹œì§€ ì—…ë°ì´íŠ¸
- íƒ€ì´í•‘ íš¨ê³¼ êµ¬í˜„

---

### 4.4 ë¼ì´ì„ ìŠ¤ ì‹œìŠ¤í…œ

#### 4.4.1 í”Œëœ ì¢…ë¥˜

| í”Œëœ | í‚¤ ì ‘ë‘ì‚¬ | ìœ íš¨ ê¸°ê°„ | ìµœëŒ€ ì•ˆë‚´ì„œ | ìµœëŒ€ ë¸”ë¡ | AI ì±—ë´‡ |
|------|-----------|-----------|-------------|-----------|---------|
| Free | - | ë¬´ì œí•œ | 1ê°œ | 6ê°œ | X |
| Monthly | M | 30ì¼ | 3ê°œ | 20ê°œ | O |
| Biannual | B | 180ì¼ | 10ê°œ | 50ê°œ | O |
| Annual | A | 365ì¼ | ë¬´ì œí•œ | ë¬´ì œí•œ | O |

#### 4.4.2 ë¼ì´ì„ ìŠ¤ í‚¤ í˜•ì‹

```
ROOMY-{plan}{random}-{random}-{random}
ì˜ˆ: ROOMY-M1A2-B3C4-D5E6 (Monthly)
    ROOMY-B7X8-Y9Z0-A1B2 (Biannual)
    ROOMY-A3C4-D5E6-F7G8 (Annual)
```

#### 4.4.3 í™œì„±í™” í”Œë¡œìš°

```
1. ì‚¬ìš©ìê°€ ë¼ì´ì„ ìŠ¤ í‚¤ ì…ë ¥
2. POST /api/licenses/activate
3. í‚¤ í˜•ì‹ ê²€ì¦ (ì •ê·œì‹)
4. í‚¤ ì‚¬ìš© ì—¬ë¶€ í™•ì¸ (DB ì¡°íšŒ)
5. ì„±ê³µ ì‹œ: License ë ˆì½”ë“œ ìƒì„±, ë§Œë£Œì¼ ê³„ì‚°
6. Userì— licenseId ì—°ê²°
7. í´ë¼ì´ì–¸íŠ¸ì— ë¼ì´ì„ ìŠ¤ ì •ë³´ ë°˜í™˜
```

#### 4.4.4 ê¸°ëŠ¥ ì œí•œ

**íŒŒì¼**: `frontend/src/app/api/[[...route]]/services/license/index.ts`

```typescript
const PLAN_FEATURES = {
  free: {
    maxGuides: 1,
    maxBlocks: 6,
    aiChat: false,
    customTheme: false,
    analytics: false,
    noWatermark: false,
  },
  monthly: {
    maxGuides: 3,
    maxBlocks: 20,
    aiChat: true,
    customTheme: true,
    analytics: false,
    noWatermark: true,
  },
  // ...
};
```

---

### 4.5 ì´ë¯¸ì§€ ì—…ë¡œë“œ

#### 4.5.1 ì—…ë¡œë“œ í”Œë¡œìš°

```
1. ì‚¬ìš©ìê°€ ì´ë¯¸ì§€ ì„ íƒ (ë“œë˜ê·¸ì•¤ë“œë¡­ ë˜ëŠ” íŒŒì¼ ì„ íƒ)
2. í´ë¼ì´ì–¸íŠ¸ ê²€ì¦:
   - íŒŒì¼ íƒ€ì…: image/* ë§Œ í—ˆìš©
   - íŒŒì¼ í¬ê¸°: 5MB ì´í•˜
3. POST /api/upload (FormData)
4. ì„œë²„ ê²€ì¦ (ë™ì¼ ì¡°ê±´)
5. Supabase Storageì— ì—…ë¡œë“œ:
   - ë²„í‚·: guide-images
   - ê²½ë¡œ: {userId}/{nanoid}.{ext}
6. ê³µê°œ URL ë°˜í™˜
7. ë¸”ë¡ content.imageUrlì— ì €ì¥
```

#### 4.5.2 ì €ì¥ì†Œ

**ì œê³µì**: Supabase Storage
**ë²„í‚·**: `guide-images` (public)
**íŒŒì¼ëª…**: `{userId}/{nanoid}.{extension}`

---

### 4.6 í…Œë§ˆ ì‹œìŠ¤í…œ

#### 4.6.1 í…Œë§ˆ ë°ì´í„° êµ¬ì¡°

```typescript
interface Theme {
  primaryColor: string;    // í¬ì¸íŠ¸ ì»¬ëŸ¬ (HEX)
  secondaryColor: string;  // ë³´ì¡° ì»¬ëŸ¬ (HEX)
  backgroundColor: string; // ë°°ê²½ìƒ‰ (HEX)
  fontFamily: string;      // í°íŠ¸ íŒ¨ë°€ë¦¬
}
```

#### 4.6.2 í”„ë¦¬ì…‹ í…Œë§ˆ

| í…Œë§ˆëª… | í¬ì¸íŠ¸ | ë³´ì¡° | ë°°ê²½ |
|--------|--------|------|------|
| Warm Coral | #E07A5F | #81B29A | #FDFBF7 |
| Ocean Blue | #2E86AB | #A23B72 | #F5F9FA |
| Forest Green | #2D6A4F | #95D5B2 | #F7FCF9 |
| Sunset Orange | #F4A261 | #E76F51 | #FFF8F3 |
| Lavender | #9B5DE5 | #F15BB5 | #FAF5FF |
| Midnight | #1A1A2E | #16213E | #0F0F23 |

#### 4.6.3 í…Œë§ˆ ì ìš©

**ì»´í¬ë„ŒíŠ¸**: `ThemeProvider` (`frontend/src/components/guest/ThemeProvider.tsx`)

CSS ë³€ìˆ˜ë¡œ í…Œë§ˆ ê°’ ì£¼ì…:
```css
:root {
  --color-primary: #E07A5F;
  --color-secondary: #81B29A;
  --color-background: #FDFBF7;
  --font-family: 'Pretendard', sans-serif;
}
```

---

## 5. ê¸°ìˆ  ìŠ¤íƒ ë° ë¼ì´ë¸ŒëŸ¬ë¦¬

### 5.1 í”„ë¡ íŠ¸ì—”ë“œ

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ /ë¼ì´ë¸ŒëŸ¬ë¦¬ | ë²„ì „ | ìš©ë„ |
|----------|-----------------|------|------|
| **í”„ë ˆì„ì›Œí¬** | Next.js | 14.2.0 | App Router, SSR |
| | React | 18.3.0 | UI ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| | TypeScript | 5.6.0 | íƒ€ì… ì•ˆì „ì„± |
| **ìŠ¤íƒ€ì¼ë§** | TailwindCSS | 3.4.0 | ìœ í‹¸ë¦¬í‹° CSS |
| | tailwind-merge | 2.6.0 | í´ë˜ìŠ¤ ë³‘í•© |
| | clsx | 2.1.1 | ì¡°ê±´ë¶€ í´ë˜ìŠ¤ |
| **UI ì»´í¬ë„ŒíŠ¸** | Radix UI | ë‹¤ì–‘í•œ | Headless UI |
| | Lucide React | 0.460.0 | ì•„ì´ì½˜ |
| | Framer Motion | 11.11.0 | ì• ë‹ˆë©”ì´ì…˜ |
| **ìƒíƒœê´€ë¦¬** | Zustand | 5.0.0 | ì „ì—­ ìƒíƒœ |
| | React Query | 5.60.0 | ì„œë²„ ìƒíƒœ, AI ì±„íŒ… |
| **ì¸ì¦** | Clerk | 5.7.0 | ì†Œì…œ ë¡œê·¸ì¸ |
| **ë“œë˜ê·¸ì•¤ë“œë¡­** | @dnd-kit | 6.3.1 | ë¸”ë¡ ì •ë ¬ |
| **í…ŒìŠ¤íŠ¸** | Vitest | 2.1.0 | ë‹¨ìœ„ í…ŒìŠ¤íŠ¸ |
| | Playwright | 1.57.0 | E2E í…ŒìŠ¤íŠ¸ |
| | MSW | 2.12.7 | API ëª¨í‚¹ |

### 5.2 ë°±ì—”ë“œ (Next.js API Routes)

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ /ë¼ì´ë¸ŒëŸ¬ë¦¬ | ë²„ì „ | ìš©ë„ |
|----------|-----------------|------|------|
| **í”„ë ˆì„ì›Œí¬** | Hono | 4.6.0 | ê²½ëŸ‰ API í”„ë ˆì„ì›Œí¬ |
| **ê²€ì¦** | Zod | 3.25.76 | ìŠ¤í‚¤ë§ˆ ê²€ì¦ |
| **ORM** | Prisma | 6.0.0 | ë°ì´í„°ë² ì´ìŠ¤ ORM |
| **ë°ì´í„°ë² ì´ìŠ¤** | Supabase | 2.45.0 | PostgreSQL |
| **ì¸ì¦** | Clerk Backend | 1.15.0 | JWT ê²€ì¦ |
| **ì›¹í›…** | Svix | 1.84.1 | ì„œëª… ê²€ì¦ |

### 5.3 AI ìŠ¤íƒ

| ì¹´í…Œê³ ë¦¬ | ê¸°ìˆ /ë¼ì´ë¸ŒëŸ¬ë¦¬ | ë²„ì „ | ìš©ë„ |
|----------|-----------------|------|------|
| **LLM** | @google/generative-ai | 0.24.1 | Gemini 2.0 Flash (Long Context) |

> **Note**: RAG/ì„ë² ë”© ë°©ì‹ì—ì„œ Long Context ë°©ì‹ìœ¼ë¡œ ì „í™˜í•˜ì—¬ LangChain, HuggingFace, pgvector ë“±ì˜ ì˜ì¡´ì„±ì´ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.

### 5.4 ì¸í”„ë¼

| ì¹´í…Œê³ ë¦¬ | ì„œë¹„ìŠ¤ | ìš©ë„ |
|----------|--------|------|
| **í˜¸ìŠ¤íŒ…** | Vercel | Next.js ë°°í¬ |
| **ë°ì´í„°ë² ì´ìŠ¤** | Supabase | PostgreSQL + ìŠ¤í† ë¦¬ì§€ |
| **ì¸ì¦** | Clerk | ì‚¬ìš©ì ê´€ë¦¬ |
| **AI** | Google AI Studio | Gemini API |

---

## 6. API ëª…ì„¸

### 6.1 ì¸ì¦ ë°©ì‹

**Bearer Token** (Clerk JWT)

```http
Authorization: Bearer {clerk_session_token}
```

### 6.2 ê³µí†µ ì‘ë‹µ í˜•ì‹

**ì„±ê³µ**:
```json
{
  "success": true,
  "data": { ... }
}
```

**ì—ëŸ¬**:
```json
{
  "success": false,
  "error": {
    "code": "ERROR_CODE",
    "message": "ì—ëŸ¬ ë©”ì‹œì§€",
    "details": { ... }
  }
}
```

**í˜ì´ì§€ë„¤ì´ì…˜**:
```json
{
  "success": true,
  "data": {
    "items": [...],
    "meta": {
      "page": 1,
      "limit": 10,
      "total": 50,
      "totalPages": 5
    }
  }
}
```

### 6.3 ì—”ë“œí¬ì¸íŠ¸ ëª©ë¡

#### ì‚¬ìš©ì API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì¸ì¦ | ì„¤ëª… |
|------------|--------|------|------|
| `/api/users/me` | GET | O | í˜„ì¬ ì‚¬ìš©ì ì •ë³´ ì¡°íšŒ |
| `/api/users/me` | PATCH | O | ì‚¬ìš©ì ì •ë³´ ìˆ˜ì • |
| `/api/users/me` | DELETE | O | ê³„ì • ì‚­ì œ |

#### ì•ˆë‚´ì„œ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì¸ì¦ | ì„¤ëª… |
|------------|--------|------|------|
| `/api/guides` | GET | O | ë‚´ ì•ˆë‚´ì„œ ëª©ë¡ ì¡°íšŒ |
| `/api/guides` | POST | O | ìƒˆ ì•ˆë‚´ì„œ ìƒì„± |
| `/api/guides/:id` | GET | O | ì•ˆë‚´ì„œ ìƒì„¸ ì¡°íšŒ |
| `/api/guides/:id` | PATCH | O | ì•ˆë‚´ì„œ ìˆ˜ì • |
| `/api/guides/:id` | DELETE | O | ì•ˆë‚´ì„œ ì‚­ì œ |
| `/api/guides/:id/publish` | POST | O | ë°œí–‰/ë°œí–‰ ì·¨ì†Œ |
| `/api/guides/:id/duplicate` | POST | O | ì•ˆë‚´ì„œ ë³µì œ |
| `/api/guides/slug/:slug` | GET | X | ê³µê°œ ì•ˆë‚´ì„œ ì¡°íšŒ (ê²ŒìŠ¤íŠ¸ìš©) |

#### AI API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì¸ì¦ | ì„¤ëª… |
|------------|--------|------|------|
| `/api/ai/status` | GET | X | AI ì„œë¹„ìŠ¤ ìƒíƒœ í™•ì¸ |
| `/api/guides/:id/ai/chat` | POST | X | AI ì±„íŒ… (SSE) |
| `/api/guides/:id/ai/conversations` | GET | X | ëŒ€í™” ê¸°ë¡ ì¡°íšŒ |
| `/api/guides/:id/ai/settings` | GET | X | AI ì„¤ì • ì¡°íšŒ |
| `/api/guides/:id/ai/settings` | PUT | X | AI ì„¤ì • ìˆ˜ì • |

> **Note**: `/api/guides/:id/ai/embed` ì—”ë“œí¬ì¸íŠ¸ëŠ” Long Context ë°©ì‹ ì „í™˜ìœ¼ë¡œ ì œê±°ë˜ì—ˆìŠµë‹ˆë‹¤.

#### ë¼ì´ì„ ìŠ¤ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì¸ì¦ | ì„¤ëª… |
|------------|--------|------|------|
| `/api/licenses/verify` | POST | X | ë¼ì´ì„ ìŠ¤ í‚¤ ê²€ì¦ |
| `/api/licenses/activate` | POST | O | ë¼ì´ì„ ìŠ¤ í™œì„±í™” |
| `/api/licenses/me` | GET | O | í˜„ì¬ ë¼ì´ì„ ìŠ¤ ì¡°íšŒ |

#### ê¸°íƒ€ API

| ì—”ë“œí¬ì¸íŠ¸ | ë©”ì„œë“œ | ì¸ì¦ | ì„¤ëª… |
|------------|--------|------|------|
| `/api/upload` | POST | O | ì´ë¯¸ì§€ ì—…ë¡œë“œ |
| `/api/webhooks/clerk` | POST | Svix | Clerk ì›¹í›… ìˆ˜ì‹  |

---

## 7. ë°ì´í„° ëª¨ë¸

### 7.1 ERD ë‹¤ì´ì–´ê·¸ë¨

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    User     â”‚       â”‚   License   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚â”€â”€â”€â”   â”‚ id          â”‚
â”‚ clerkId     â”‚   â”‚   â”‚ licenseKey  â”‚
â”‚ email       â”‚   â”‚   â”‚ plan        â”‚
â”‚ name        â”‚   â”‚   â”‚ status      â”‚
â”‚ imageUrl    â”‚   â””â”€â”€â†’â”‚ userId      â”‚
â”‚ createdAt   â”‚       â”‚ expiresAt   â”‚
â”‚ updatedAt   â”‚       â”‚ features    â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Guide    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚
â”‚ userId      â”‚
â”‚ slug        â”‚
â”‚ title       â”‚
â”‚ accommName  â”‚
â”‚ theme       â”‚
â”‚ isPublished â”‚
â”‚ aiEnabled   â”‚
â”‚ aiInstructionsâ”‚
â”‚ viewCount   â”‚
â”‚ createdAt   â”‚
â”‚ updatedAt   â”‚
â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ 1:N
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚    Block    â”‚       â”‚ GuideEmbedding  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤       â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id          â”‚       â”‚ id              â”‚
â”‚ guideId     â”‚       â”‚ guideId         â”‚
â”‚ type        â”‚       â”‚ blockId         â”‚
â”‚ order       â”‚       â”‚ content         â”‚
â”‚ content     â”‚       â”‚ embedding (768) â”‚
â”‚ isVisible   â”‚       â”‚ metadata        â”‚
â”‚ createdAt   â”‚       â”‚ createdAt       â”‚
â”‚ updatedAt   â”‚       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
       â”‚
       â”‚ (Guide ê¸°ì¤€)
       â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ AiConversation  â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id              â”‚
â”‚ guideId         â”‚
â”‚ sessionId       â”‚
â”‚ role            â”‚
â”‚ content         â”‚
â”‚ createdAt       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 7.2 ì£¼ìš” ëª¨ë¸ ìƒì„¸

#### User

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | String | UUID |
| clerkId | String | Clerk ì‚¬ìš©ì ID (unique) |
| email | String | ì´ë©”ì¼ (unique) |
| name | String? | í‘œì‹œ ì´ë¦„ |
| imageUrl | String? | í”„ë¡œí•„ ì´ë¯¸ì§€ URL |

#### Guide

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | String | UUID |
| userId | String | ì†Œìœ ì FK |
| slug | String | URL ê²½ë¡œ (unique) |
| title | String | ì•ˆë‚´ì„œ ì œëª© |
| accommodationName | String | ìˆ™ì†Œëª… |
| theme | Json | í…Œë§ˆ ì„¤ì • |
| isPublished | Boolean | ë°œí–‰ ì—¬ë¶€ |
| aiEnabled | Boolean | AI ì±—ë´‡ í™œì„±í™” |
| aiInstructions | String? | AI ì»¤ìŠ¤í…€ ì§€ì¹¨ |
| viewCount | Int | ì¡°íšŒìˆ˜ |

#### Block

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | String | UUID |
| guideId | String | ì†Œì† ì•ˆë‚´ì„œ FK |
| type | String | ë¸”ë¡ íƒ€ì… |
| order | Int | í‘œì‹œ ìˆœì„œ |
| content | Json | ë¸”ë¡ ë‚´ìš© |
| isVisible | Boolean | í‘œì‹œ ì—¬ë¶€ |

#### GuideEmbedding

| í•„ë“œ | íƒ€ì… | ì„¤ëª… |
|------|------|------|
| id | String | UUID |
| guideId | String | ì•ˆë‚´ì„œ FK |
| blockId | String? | ë¸”ë¡ FK |
| content | String | ì›ë³¸ í…ìŠ¤íŠ¸ |
| embedding | Float[] | 768ì°¨ì› ë²¡í„° |
| metadata | Json? | ì¶”ê°€ ë©”íƒ€ë°ì´í„° |

---

## ë¶€ë¡

### A. í™˜ê²½ ë³€ìˆ˜

```bash
# ì• í”Œë¦¬ì¼€ì´ì…˜
NEXT_PUBLIC_APP_URL=http://localhost:3000
NEXT_PUBLIC_API_URL=/api

# ë°ì´í„°ë² ì´ìŠ¤
DATABASE_URL=postgresql://...
DIRECT_URL=postgresql://...

# ì¸ì¦ (Clerk)
NEXT_PUBLIC_CLERK_PUBLISHABLE_KEY=pk_test_xxx
CLERK_SECRET_KEY=sk_test_xxx
CLERK_WEBHOOK_SECRET=whsec_xxx

# AI
GOOGLE_API_KEY=xxx
HUGGINGFACEHUB_API_KEY=hf_xxx
OPENAI_API_KEY=sk-xxx  # ì„ íƒì 

# Supabase
NEXT_PUBLIC_SUPABASE_URL=https://xxx.supabase.co
NEXT_PUBLIC_SUPABASE_ANON_KEY=xxx
SUPABASE_SERVICE_ROLE_KEY=xxx
```

### B. ê°œë°œ ëª…ë ¹ì–´

```bash
# í”„ë¡ íŠ¸ì—”ë“œ
cd frontend
npm install          # ì˜ì¡´ì„± ì„¤ì¹˜
npm run dev          # ê°œë°œ ì„œë²„ (localhost:3000)
npm run build        # í”„ë¡œë•ì…˜ ë¹Œë“œ
npm test             # ë‹¨ìœ„ í…ŒìŠ¤íŠ¸
npm run e2e          # E2E í…ŒìŠ¤íŠ¸

# ë°ì´í„°ë² ì´ìŠ¤
npm run db:generate  # Prisma í´ë¼ì´ì–¸íŠ¸ ìƒì„±
npm run db:push      # ìŠ¤í‚¤ë§ˆ ë™ê¸°í™”
npm run db:migrate   # ë§ˆì´ê·¸ë ˆì´ì…˜
npm run db:studio    # Prisma Studio
```

### C. íŒŒì¼ êµ¬ì¡° ìš”ì•½

```
roomy/
â”œâ”€â”€ frontend/                       # Next.js í’€ìŠ¤íƒ ì•±
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ app/                    # Next.js App Router
â”‚   â”‚   â”‚   â”œâ”€â”€ (auth)/             # ì¸ì¦ í˜ì´ì§€
â”‚   â”‚   â”‚   â”œâ”€â”€ (protected)/        # í˜¸ìŠ¤íŠ¸ í˜ì´ì§€
â”‚   â”‚   â”‚   â”œâ”€â”€ (guest)/            # ê²ŒìŠ¤íŠ¸ í˜ì´ì§€
â”‚   â”‚   â”‚   â””â”€â”€ api/[[...route]]/   # Hono API
â”‚   â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”‚   â”œâ”€â”€ ai/                 # AI ì±—ë´‡ UI
â”‚   â”‚   â”‚   â”œâ”€â”€ blocks/             # ë¸”ë¡ ì—ë””í„°
â”‚   â”‚   â”‚   â”œâ”€â”€ dashboard/          # ëŒ€ì‹œë³´ë“œ ì»´í¬ë„ŒíŠ¸
â”‚   â”‚   â”‚   â”œâ”€â”€ editor/             # ì—ë””í„° UI
â”‚   â”‚   â”‚   â”œâ”€â”€ guest/              # ê²ŒìŠ¤íŠ¸ ë·°
â”‚   â”‚   â”‚   â””â”€â”€ ui/                 # ê³µí†µ UI
â”‚   â”‚   â”œâ”€â”€ hooks/                  # ì»¤ìŠ¤í…€ í›…
â”‚   â”‚   â”œâ”€â”€ lib/                    # ìœ í‹¸ë¦¬í‹°
â”‚   â”‚   â”œâ”€â”€ stores/                 # Zustand ìŠ¤í† ì–´
â”‚   â”‚   â””â”€â”€ types/                  # TypeScript íƒ€ì…
â”‚   â”œâ”€â”€ prisma/                     # Prisma ìŠ¤í‚¤ë§ˆ
â”‚   â””â”€â”€ e2e/                        # E2E í…ŒìŠ¤íŠ¸
â”œâ”€â”€ docs/planning/                  # ê¸°íš ë¬¸ì„œ
â””â”€â”€ FEATURE-SPEC.md                 # ì´ ë¬¸ì„œ
```

---

**ë¬¸ì„œ ë**
